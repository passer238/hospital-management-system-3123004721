-- ============================================
-- 医院信息管理系统 - 测试数据
-- 作者: 袁子轩
-- 学号: 3123004721
-- ============================================

USE hospital3123004721;
GO

-- ================ 1. 医生数据 ================
INSERT INTO doctor (d_octor_id, d_name, d_sex, d_age, d_dept, d_tel) VALUES
(1, N'王渊洁', N'男', 35, N'牙科', '13700001001'),
(2, N'莫家里昂', N'男', 42, N'妇产科', '13700001002'),
(3, N'尘思语', N'女', 38, N'肛肠科', '13700001003'),
(4, N'杰瑞哲', N'男', 45, N'呼吸道科', '13700001004'),
(5, N'唐三', N'女', 32, N'骨科', '13700001005'),
(6, N'叶文洁', N'女', 50, N'心理科', '13700001006'),
(7, N'罗辑', N'男', 40, N'眼科', '13700001007'),
(8, N'尘心', N'女', 28, N'内科', '13700001008');

PRINT '医生数据插入完成';
GO

-- ================ 2. 病人数据 ================
INSERT INTO patient (p_atient_id, p_name, p_age, p_sex, p_tel, p_inf) VALUES
('411282200001015555', N'张三', 24, N'男', '13900001001', N'牙疼'),
('421282199502025554', N'李四', 30, N'女', '13900001002', N'产检'),
('251381198003035553', N'王五', 45, N'男', '13900001003', N'胃疼腹泻'),
('315213197504045552', N'赵六', 50, N'女', '13900001004', N'咳嗽肺炎');

PRINT '病人数据插入完成';
GO

-- ================ 3. 药品数据 ================
INSERT INTO drugs (drug_id, drug_name, drug_price, drug_quantity, drug_storage, drug_date, usefull_life) VALUES
('100001', N'感冒灵颗粒', 15.50, 500, 'A-1-101', '2024-01-01', '2026-01-01'),
('100002', N'阿莫西林胶囊', 25.00, 300, 'A-1-102', '2024-01-01', '2026-01-01'),
('100003', N'布洛芬片', 12.00, 800, 'A-2-101', '2024-01-01', '2026-01-01'),
('100004', N'维生素C片', 8.00, 1000, 'B-1-101', '2024-01-01', '2027-01-01'),
('100005', N'头孢拉定胶囊', 35.00, 200, 'A-2-102', '2024-01-01', '2026-01-01'),
('100006', N'止咳糖浆', 18.00, 400, 'B-1-102', '2024-01-01', '2026-01-01'),
('100007', N'双黄连口服液', 28.00, 350, 'B-2-101', '2024-01-01', '2026-01-01'),
('100008', N'板蓝根颗粒', 10.00, 600, 'B-2-102', '2024-01-01', '2026-01-01'),
('100009', N'复方甘草片', 6.00, 700, 'C-1-101', '2024-01-01', '2026-01-01'),
('100010', N'胃康灵胶囊', 22.00, 250, 'C-1-102', '2024-01-01', '2026-01-01');

PRINT '药品数据插入完成';
GO

-- ================ 4. 挂号数据 ================
SET IDENTITY_INSERT register ON;
INSERT INTO register (r_num, r_patient_id, r_P_name, r_sex, r_dept, r_doctor_id, r_name) VALUES
(1, '411282200001015555', N'张三', N'男', N'牙科', 1, N'王渊洁'),
(2, '421282199502025554', N'李四', N'女', N'妇产科', 2, N'莫家里昂'),
(3, '251381198003035553', N'王五', N'男', N'肛肠科', 3, N'尘思语'),
(4, '315213197504045552', N'赵六', N'女', N'呼吸道科', 4, N'杰瑞哲');
SET IDENTITY_INSERT register OFF;

PRINT '挂号数据插入完成';
GO

-- ================ 5. 处方和收费数据 ================

-- 处方1：张三
SET IDENTITY_INSERT recipel ON;
INSERT INTO recipel (id, doctor_id, patient_name, registration_id) VALUES
(1, 1, N'张三', 1);
SET IDENTITY_INSERT recipel OFF;

INSERT INTO prescription_drug (prescription_id, drug_id, quantity) VALUES
(1, '100001', 2),
(1, '100003', 1);

-- 生成收费记录
INSERT INTO charge (toll_id, t_name, patient_id, drug_id, drug_quantity, amount) VALUES
('1', N'系统', '411282200001015555', '100001', 2, 31.00),
('1', N'系统', '411282200001015555', '100003', 1, 12.00);

-- 扣减库存
UPDATE drugs SET drug_quantity = drug_quantity - 2 WHERE drug_id = '100001';
UPDATE drugs SET drug_quantity = drug_quantity - 1 WHERE drug_id = '100003';

PRINT '处方和收费数据插入完成';
GO

-- ================ 6. 支付和取药数据 ================

-- 张三支付
INSERT INTO pay (patient_id, t_id, price) VALUES
('411282200001015555', '1', 43.00);

-- 生成取药票单
INSERT INTO PGM (t_id, drug_id, quantity, price) VALUES
('1', '100001', 2, 31.00),
('1', '100003', 1, 12.00);

PRINT '支付和取药数据插入完成';
GO

PRINT '';
PRINT '========================================';
PRINT '测试数据插入完成！';
PRINT '医生: 8人';
PRINT '病人: 4人';
PRINT '药品: 10种';
PRINT '挂号: 4条';
PRINT '处方: 1条（张三）';
PRINT '支付: 1条（张三）';
PRINT '待开处方挂号: 李四、王五、赵六';
PRINT '========================================';
GO
